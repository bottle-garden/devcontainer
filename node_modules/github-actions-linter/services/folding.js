"use strict";
/*!
 * Copyright 2019 Omar Tawfik. Please see LICENSE file at the root of this repository.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var vscode_languageserver_1 = require("vscode-languageserver");
var cache_1 = require("../util/cache");
var FoldingService = /** @class */ (function () {
    function FoldingService() {
    }
    FoldingService.prototype.fillCapabilities = function (capabilities) {
        capabilities.foldingRangeProvider = true;
    };
    FoldingService.prototype.activate = function (connection, documents) {
        connection.onFoldingRanges(function (params) {
            var uri = params.textDocument.uri;
            var compilation = cache_1.accessCache(documents, uri);
            return compilation.syntax.blocks.map(function (block) {
                var start = block.openBracket.range.start;
                var end = block.closeBracket.range.end;
                return vscode_languageserver_1.FoldingRange.create(start.line, end.line, start.character, end.character, vscode_languageserver_1.FoldingRangeKind.Region);
            });
        });
    };
    return FoldingService;
}());
exports.FoldingService = FoldingService;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9zZXJ2aWNlcy9mb2xkaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7QUFFSCwrREFBdUg7QUFFdkgsdUNBQTRDO0FBRTVDO0lBQUE7SUFpQkEsQ0FBQztJQWhCUSx5Q0FBZ0IsR0FBdkIsVUFBd0IsWUFBZ0M7UUFDdEQsWUFBWSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQztJQUMzQyxDQUFDO0lBRU0saUNBQVEsR0FBZixVQUFnQixVQUF1QixFQUFFLFNBQXdCO1FBQy9ELFVBQVUsQ0FBQyxlQUFlLENBQUMsVUFBQSxNQUFNO1lBQ3ZCLElBQUEsNkJBQUcsQ0FBeUI7WUFDcEMsSUFBTSxXQUFXLEdBQUcsbUJBQVcsQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFFaEQsT0FBTyxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBQSxLQUFLO2dCQUN4QyxJQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7Z0JBQzVDLElBQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztnQkFDekMsT0FBTyxvQ0FBWSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsU0FBUyxFQUFFLHdDQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzVHLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0gscUJBQUM7QUFBRCxDQWpCQSxBQWlCQyxJQUFBO0FBakJZLHdDQUFjIiwiZmlsZSI6InNyYy9zZXJ2aWNlcy9mb2xkaW5nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgMjAxOSBPbWFyIFRhd2Zpay4gUGxlYXNlIHNlZSBMSUNFTlNFIGZpbGUgYXQgdGhlIHJvb3Qgb2YgdGhpcyByZXBvc2l0b3J5LlxuICovXG5cbmltcG9ydCB7IElDb25uZWN0aW9uLCBUZXh0RG9jdW1lbnRzLCBGb2xkaW5nUmFuZ2VLaW5kLCBGb2xkaW5nUmFuZ2UsIFNlcnZlckNhcGFiaWxpdGllcyB9IGZyb20gXCJ2c2NvZGUtbGFuZ3VhZ2VzZXJ2ZXJcIjtcbmltcG9ydCB7IExhbmd1YWdlU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2ZXJcIjtcbmltcG9ydCB7IGFjY2Vzc0NhY2hlIH0gZnJvbSBcIi4uL3V0aWwvY2FjaGVcIjtcblxuZXhwb3J0IGNsYXNzIEZvbGRpbmdTZXJ2aWNlIGltcGxlbWVudHMgTGFuZ3VhZ2VTZXJ2aWNlIHtcbiAgcHVibGljIGZpbGxDYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzOiBTZXJ2ZXJDYXBhYmlsaXRpZXMpOiB2b2lkIHtcbiAgICBjYXBhYmlsaXRpZXMuZm9sZGluZ1JhbmdlUHJvdmlkZXIgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIGFjdGl2YXRlKGNvbm5lY3Rpb246IElDb25uZWN0aW9uLCBkb2N1bWVudHM6IFRleHREb2N1bWVudHMpOiB2b2lkIHtcbiAgICBjb25uZWN0aW9uLm9uRm9sZGluZ1JhbmdlcyhwYXJhbXMgPT4ge1xuICAgICAgY29uc3QgeyB1cmkgfSA9IHBhcmFtcy50ZXh0RG9jdW1lbnQ7XG4gICAgICBjb25zdCBjb21waWxhdGlvbiA9IGFjY2Vzc0NhY2hlKGRvY3VtZW50cywgdXJpKTtcblxuICAgICAgcmV0dXJuIGNvbXBpbGF0aW9uLnN5bnRheC5ibG9ja3MubWFwKGJsb2NrID0+IHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBibG9jay5vcGVuQnJhY2tldC5yYW5nZS5zdGFydDtcbiAgICAgICAgY29uc3QgZW5kID0gYmxvY2suY2xvc2VCcmFja2V0LnJhbmdlLmVuZDtcbiAgICAgICAgcmV0dXJuIEZvbGRpbmdSYW5nZS5jcmVhdGUoc3RhcnQubGluZSwgZW5kLmxpbmUsIHN0YXJ0LmNoYXJhY3RlciwgZW5kLmNoYXJhY3RlciwgRm9sZGluZ1JhbmdlS2luZC5SZWdpb24pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==
