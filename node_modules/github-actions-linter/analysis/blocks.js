"use strict";
/*!
 * Copyright 2019 Omar Tawfik. Please see LICENSE file at the root of this repository.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var constants_1 = require("../util/constants");
function analyzeBlocks(document, bag) {
    var definedBlocks = new Set();
    document.actions.forEach(function (action) {
        if (definedBlocks.has(action.name)) {
            bag.duplicateBlock(action.name, action.syntax.name.range);
        }
        else {
            if (definedBlocks.size === constants_1.MAXIMUM_SUPPORTED_ACTIONS) {
                bag.tooManyActions(action.syntax.name.range);
            }
            definedBlocks.add(action.name);
        }
    });
    document.workflows.forEach(function (workflow) {
        if (definedBlocks.has(workflow.name)) {
            bag.duplicateBlock(workflow.name, workflow.syntax.name.range);
        }
        else {
            definedBlocks.add(workflow.name);
        }
    });
}
exports.analyzeBlocks = analyzeBlocks;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hbmFseXNpcy9ibG9ja3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQUlILCtDQUE4RDtBQUU5RCxTQUFnQixhQUFhLENBQUMsUUFBdUIsRUFBRSxHQUFrQjtJQUN2RSxJQUFNLGFBQWEsR0FBRyxJQUFJLEdBQUcsRUFBVSxDQUFDO0lBRXhDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFVBQUEsTUFBTTtRQUM3QixJQUFJLGFBQWEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ2xDLEdBQUcsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUMzRDthQUFNO1lBQ0wsSUFBSSxhQUFhLENBQUMsSUFBSSxLQUFLLHFDQUF5QixFQUFFO2dCQUNwRCxHQUFHLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzlDO1lBRUQsYUFBYSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDaEM7SUFDSCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFVBQUEsUUFBUTtRQUNqQyxJQUFJLGFBQWEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ3BDLEdBQUcsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUMvRDthQUFNO1lBQ0wsYUFBYSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDbEM7SUFDSCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUF0QkQsc0NBc0JDIiwiZmlsZSI6InNyYy9hbmFseXNpcy9ibG9ja3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAyMDE5IE9tYXIgVGF3ZmlrLiBQbGVhc2Ugc2VlIExJQ0VOU0UgZmlsZSBhdCB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnkuXG4gKi9cblxuaW1wb3J0IHsgQm91bmREb2N1bWVudCB9IGZyb20gXCIuLi9iaW5kaW5nL2JvdW5kLW5vZGVzXCI7XG5pbXBvcnQgeyBEaWFnbm9zdGljQmFnIH0gZnJvbSBcIi4uL3V0aWwvZGlhZ25vc3RpY3NcIjtcbmltcG9ydCB7IE1BWElNVU1fU1VQUE9SVEVEX0FDVElPTlMgfSBmcm9tIFwiLi4vdXRpbC9jb25zdGFudHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGFuYWx5emVCbG9ja3MoZG9jdW1lbnQ6IEJvdW5kRG9jdW1lbnQsIGJhZzogRGlhZ25vc3RpY0JhZyk6IHZvaWQge1xuICBjb25zdCBkZWZpbmVkQmxvY2tzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgZG9jdW1lbnQuYWN0aW9ucy5mb3JFYWNoKGFjdGlvbiA9PiB7XG4gICAgaWYgKGRlZmluZWRCbG9ja3MuaGFzKGFjdGlvbi5uYW1lKSkge1xuICAgICAgYmFnLmR1cGxpY2F0ZUJsb2NrKGFjdGlvbi5uYW1lLCBhY3Rpb24uc3ludGF4Lm5hbWUucmFuZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZGVmaW5lZEJsb2Nrcy5zaXplID09PSBNQVhJTVVNX1NVUFBPUlRFRF9BQ1RJT05TKSB7XG4gICAgICAgIGJhZy50b29NYW55QWN0aW9ucyhhY3Rpb24uc3ludGF4Lm5hbWUucmFuZ2UpO1xuICAgICAgfVxuXG4gICAgICBkZWZpbmVkQmxvY2tzLmFkZChhY3Rpb24ubmFtZSk7XG4gICAgfVxuICB9KTtcblxuICBkb2N1bWVudC53b3JrZmxvd3MuZm9yRWFjaCh3b3JrZmxvdyA9PiB7XG4gICAgaWYgKGRlZmluZWRCbG9ja3MuaGFzKHdvcmtmbG93Lm5hbWUpKSB7XG4gICAgICBiYWcuZHVwbGljYXRlQmxvY2sod29ya2Zsb3cubmFtZSwgd29ya2Zsb3cuc3ludGF4Lm5hbWUucmFuZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWZpbmVkQmxvY2tzLmFkZCh3b3JrZmxvdy5uYW1lKTtcbiAgICB9XG4gIH0pO1xufVxuIl19
