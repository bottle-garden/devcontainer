"use strict";
/*!
 * Copyright 2019 Omar Tawfik. Please see LICENSE file at the root of this repository.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tokens_1 = require("../scanning/tokens");
var constants_1 = require("./constants");
var vscode_languageserver_types_1 = require("vscode-languageserver-types");
var DiagnosticCode;
(function (DiagnosticCode) {
    // Scanning
    DiagnosticCode[DiagnosticCode["UnrecognizedCharacter"] = 0] = "UnrecognizedCharacter";
    DiagnosticCode[DiagnosticCode["UnterminatedStringLiteral"] = 1] = "UnterminatedStringLiteral";
    DiagnosticCode[DiagnosticCode["UnsupportedEscapeSequence"] = 2] = "UnsupportedEscapeSequence";
    // Parsing
    DiagnosticCode[DiagnosticCode["MissingToken"] = 3] = "MissingToken";
    DiagnosticCode[DiagnosticCode["UnexpectedToken"] = 4] = "UnexpectedToken";
    // Divider
    DiagnosticCode[DiagnosticCode["PARSING_ERRORS_MARK"] = 5] = "PARSING_ERRORS_MARK";
    // Binding
    DiagnosticCode[DiagnosticCode["MultipleVersion"] = 6] = "MultipleVersion";
    DiagnosticCode[DiagnosticCode["UnrecognizedVersion"] = 7] = "UnrecognizedVersion";
    DiagnosticCode[DiagnosticCode["VersionAfterBlock"] = 8] = "VersionAfterBlock";
    DiagnosticCode[DiagnosticCode["ValueIsNotString"] = 9] = "ValueIsNotString";
    DiagnosticCode[DiagnosticCode["ValueIsNotStringOrArray"] = 10] = "ValueIsNotStringOrArray";
    DiagnosticCode[DiagnosticCode["ValueIsNotAnObject"] = 11] = "ValueIsNotAnObject";
    DiagnosticCode[DiagnosticCode["PropertyAlreadyDefined"] = 12] = "PropertyAlreadyDefined";
    DiagnosticCode[DiagnosticCode["PropertyMustBeDefined"] = 13] = "PropertyMustBeDefined";
    DiagnosticCode[DiagnosticCode["InvalidProperty"] = 14] = "InvalidProperty";
    DiagnosticCode[DiagnosticCode["DuplicateKey"] = 15] = "DuplicateKey";
    // Block Analysis
    DiagnosticCode[DiagnosticCode["TooManyActions"] = 16] = "TooManyActions";
    DiagnosticCode[DiagnosticCode["DuplicateBlock"] = 17] = "DuplicateBlock";
    DiagnosticCode[DiagnosticCode["CircularDependency"] = 18] = "CircularDependency";
    // Property Analysis
    DiagnosticCode[DiagnosticCode["ActionDoesNotExist"] = 19] = "ActionDoesNotExist";
    DiagnosticCode[DiagnosticCode["TooManySecrets"] = 20] = "TooManySecrets";
    DiagnosticCode[DiagnosticCode["DuplicateSecrets"] = 21] = "DuplicateSecrets";
    DiagnosticCode[DiagnosticCode["DuplicateActions"] = 22] = "DuplicateActions";
    DiagnosticCode[DiagnosticCode["ReservedEnvironmentVariable"] = 23] = "ReservedEnvironmentVariable";
    DiagnosticCode[DiagnosticCode["UnrecognizedEvent"] = 24] = "UnrecognizedEvent";
    DiagnosticCode[DiagnosticCode["InvalidUses"] = 25] = "InvalidUses";
})(DiagnosticCode = exports.DiagnosticCode || (exports.DiagnosticCode = {}));
function severityToString(severity) {
    switch (severity) {
        case undefined:
        case vscode_languageserver_types_1.DiagnosticSeverity.Error:
            return "ERROR";
        case vscode_languageserver_types_1.DiagnosticSeverity.Warning:
            return "WARN";
        default:
            throw new Error("Unexpected severity: '" + severity + "'.");
    }
}
exports.severityToString = severityToString;
var DiagnosticBag = /** @class */ (function () {
    function DiagnosticBag() {
        this.items = [];
    }
    Object.defineProperty(DiagnosticBag.prototype, "diagnostics", {
        get: function () {
            return this.items;
        },
        enumerable: true,
        configurable: true
    });
    DiagnosticBag.prototype.unrecognizedCharacter = function (character, range) {
        this.items.push({
            range: range,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            code: DiagnosticCode.UnrecognizedCharacter,
            message: "The character '" + character + "' is unrecognizable.",
        });
    };
    DiagnosticBag.prototype.unterminatedStringLiteral = function (range) {
        this.items.push({
            range: range,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            code: DiagnosticCode.UnterminatedStringLiteral,
            message: "This string literal must end with double quotes.",
        });
    };
    DiagnosticBag.prototype.unsupportedEscapeSequence = function (character, range) {
        this.items.push({
            range: range,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            code: DiagnosticCode.UnsupportedEscapeSequence,
            message: "The character '" + character + "' is not a supported escape sequence.",
        });
    };
    DiagnosticBag.prototype.missingToken = function (kinds, range, endOfFile) {
        this.items.push({
            range: range,
            code: DiagnosticCode.MissingToken,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "A token of kind " + kinds.map(function (k) { return "'" + tokens_1.getTokenDescription(k) + "'"; }).join(" or ") + " was expected " + (endOfFile ? "after this" : "here") + ".",
        });
    };
    DiagnosticBag.prototype.unexpectedToken = function (token) {
        this.items.push({
            range: token.range,
            code: DiagnosticCode.UnexpectedToken,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "A token of kind '" + tokens_1.getTokenDescription(token.kind) + "' was not expected here.",
        });
    };
    DiagnosticBag.prototype.multipleVersions = function (range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.MultipleVersion,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "A version is already specified for this document'. You can only specify one.",
        });
    };
    DiagnosticBag.prototype.unrecognizedVersion = function (version, range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.UnrecognizedVersion,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "The version '" + version + "' is not valid. Only versions up to '" + constants_1.MAXIMUM_SUPPORTED_VERSION + "' are supported.",
        });
    };
    DiagnosticBag.prototype.versionAfterBlock = function (range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.VersionAfterBlock,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "Version must be specified before all actions or workflows are defined.",
        });
    };
    DiagnosticBag.prototype.valueIsNotString = function (range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.ValueIsNotString,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "Value must be a single string.",
        });
    };
    DiagnosticBag.prototype.valueIsNotStringOrArray = function (range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.ValueIsNotStringOrArray,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "Value must be a single string or an array of strings.",
        });
    };
    DiagnosticBag.prototype.valueIsNotAnObject = function (range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.ValueIsNotAnObject,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "Value must be an object.",
        });
    };
    DiagnosticBag.prototype.propertyAlreadyDefined = function (keyword) {
        this.items.push({
            range: keyword.range,
            code: DiagnosticCode.PropertyAlreadyDefined,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "A property '" + tokens_1.getTokenDescription(keyword.kind) + "' is already defined in this block.",
        });
    };
    DiagnosticBag.prototype.propertyMustBeDefined = function (property, block) {
        this.items.push({
            range: block.range,
            code: DiagnosticCode.PropertyMustBeDefined,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "This '" + tokens_1.getTokenDescription(block.kind) + "' must define a '" + tokens_1.getTokenDescription(property) + "' property.",
        });
    };
    DiagnosticBag.prototype.invalidProperty = function (property, block) {
        this.items.push({
            range: property.range,
            code: DiagnosticCode.InvalidProperty,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "A property of kind '" + tokens_1.getTokenDescription(property.kind) + "' cannot be defined for a '" + tokens_1.getTokenDescription(block) + "' block.",
        });
    };
    DiagnosticBag.prototype.duplicateKey = function (key, range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.DuplicateKey,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "A key with the name '" + key + "' is already defined.",
        });
    };
    DiagnosticBag.prototype.tooManyActions = function (range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.TooManyActions,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "Too many actions defined. The maximum currently supported is '" + constants_1.MAXIMUM_SUPPORTED_ACTIONS + "'.",
        });
    };
    DiagnosticBag.prototype.duplicateBlock = function (duplicate, range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.DuplicateBlock,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "This file already defines another workflow or action with the name '" + duplicate + "'.",
        });
    };
    DiagnosticBag.prototype.circularDependency = function (action, range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.CircularDependency,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "The action '" + action + "' has a circular dependency on itself.",
        });
    };
    DiagnosticBag.prototype.actionDoesNotExist = function (action, range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.ActionDoesNotExist,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "The action '" + action + "' does not exist in the same workflow file.",
        });
    };
    DiagnosticBag.prototype.tooManySecrets = function (range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.TooManySecrets,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "Too many secrets defined. The maximum currently supported is '" + constants_1.MAXIMUM_SUPPORTED_SECRETS + "'.",
        });
    };
    DiagnosticBag.prototype.duplicateSecrets = function (duplicate, range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.DuplicateSecrets,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "This property has duplicate '" + duplicate + "' secrets.",
        });
    };
    DiagnosticBag.prototype.duplicateActions = function (duplicate, range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.DuplicateActions,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "This property has duplicate '" + duplicate + "' actions.",
        });
    };
    DiagnosticBag.prototype.reservedEnvironmentVariable = function (range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.ReservedEnvironmentVariable,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "Environment variables starting with 'GITHUB_' are reserved.",
        });
    };
    DiagnosticBag.prototype.unrecognizedEvent = function (event, range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.UnrecognizedEvent,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "The event '" + event + "' is not a known event type or a schedule.",
        });
    };
    DiagnosticBag.prototype.invalidUses = function (range) {
        this.items.push({
            range: range,
            code: DiagnosticCode.InvalidUses,
            source: constants_1.LANGUAGE_NAME,
            severity: vscode_languageserver_types_1.DiagnosticSeverity.Error,
            message: "The 'uses' property must be a path, a Docker image, or an owner/repo@ref remote.",
        });
    };
    return DiagnosticBag;
}());
exports.DiagnosticBag = DiagnosticBag;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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LENBQUMsQ0FBQztJQUNMLENBQUM7SUFDSCxvQkFBQztBQUFELENBeFFBLEFBd1FDLElBQUE7QUF4UVksc0NBQWEiLCJmaWxlIjoic3JjL3V0aWwvZGlhZ25vc3RpY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAyMDE5IE9tYXIgVGF3ZmlrLiBQbGVhc2Ugc2VlIExJQ0VOU0UgZmlsZSBhdCB0aGUgcm9vdCBvZiB0aGlzIHJlcG9zaXRvcnkuXG4gKi9cblxuaW1wb3J0IHsgVG9rZW5LaW5kLCBnZXRUb2tlbkRlc2NyaXB0aW9uLCBUb2tlbiB9IGZyb20gXCIuLi9zY2FubmluZy90b2tlbnNcIjtcbmltcG9ydCB7XG4gIE1BWElNVU1fU1VQUE9SVEVEX1ZFUlNJT04sXG4gIE1BWElNVU1fU1VQUE9SVEVEX1NFQ1JFVFMsXG4gIE1BWElNVU1fU1VQUE9SVEVEX0FDVElPTlMsXG4gIExBTkdVQUdFX05BTUUsXG59IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgUmFuZ2UsIERpYWdub3N0aWMsIERpYWdub3N0aWNTZXZlcml0eSB9IGZyb20gXCJ2c2NvZGUtbGFuZ3VhZ2VzZXJ2ZXItdHlwZXNcIjtcblxuZXhwb3J0IGVudW0gRGlhZ25vc3RpY0NvZGUge1xuICAvLyBTY2FubmluZ1xuICBVbnJlY29nbml6ZWRDaGFyYWN0ZXIsXG4gIFVudGVybWluYXRlZFN0cmluZ0xpdGVyYWwsXG4gIFVuc3VwcG9ydGVkRXNjYXBlU2VxdWVuY2UsXG5cbiAgLy8gUGFyc2luZ1xuICBNaXNzaW5nVG9rZW4sXG4gIFVuZXhwZWN0ZWRUb2tlbixcblxuICAvLyBEaXZpZGVyXG4gIFBBUlNJTkdfRVJST1JTX01BUkssXG5cbiAgLy8gQmluZGluZ1xuICBNdWx0aXBsZVZlcnNpb24sXG4gIFVucmVjb2duaXplZFZlcnNpb24sXG4gIFZlcnNpb25BZnRlckJsb2NrLFxuICBWYWx1ZUlzTm90U3RyaW5nLFxuICBWYWx1ZUlzTm90U3RyaW5nT3JBcnJheSxcbiAgVmFsdWVJc05vdEFuT2JqZWN0LFxuICBQcm9wZXJ0eUFscmVhZHlEZWZpbmVkLFxuICBQcm9wZXJ0eU11c3RCZURlZmluZWQsXG4gIEludmFsaWRQcm9wZXJ0eSxcbiAgRHVwbGljYXRlS2V5LFxuXG4gIC8vIEJsb2NrIEFuYWx5c2lzXG4gIFRvb01hbnlBY3Rpb25zLFxuICBEdXBsaWNhdGVCbG9jayxcbiAgQ2lyY3VsYXJEZXBlbmRlbmN5LFxuXG4gIC8vIFByb3BlcnR5IEFuYWx5c2lzXG4gIEFjdGlvbkRvZXNOb3RFeGlzdCxcbiAgVG9vTWFueVNlY3JldHMsXG4gIER1cGxpY2F0ZVNlY3JldHMsXG4gIER1cGxpY2F0ZUFjdGlvbnMsXG4gIFJlc2VydmVkRW52aXJvbm1lbnRWYXJpYWJsZSxcbiAgVW5yZWNvZ25pemVkRXZlbnQsXG4gIEludmFsaWRVc2VzLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V2ZXJpdHlUb1N0cmluZyhzZXZlcml0eTogRGlhZ25vc3RpY1NldmVyaXR5IHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgc3dpdGNoIChzZXZlcml0eSkge1xuICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgIGNhc2UgRGlhZ25vc3RpY1NldmVyaXR5LkVycm9yOlxuICAgICAgcmV0dXJuIFwiRVJST1JcIjtcbiAgICBjYXNlIERpYWdub3N0aWNTZXZlcml0eS5XYXJuaW5nOlxuICAgICAgcmV0dXJuIFwiV0FSTlwiO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgc2V2ZXJpdHk6ICcke3NldmVyaXR5fScuYCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERpYWdub3N0aWNCYWcge1xuICBwcml2YXRlIHJlYWRvbmx5IGl0ZW1zOiBEaWFnbm9zdGljW107XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgZGlhZ25vc3RpY3MoKTogUmVhZG9ubHlBcnJheTxEaWFnbm9zdGljPiB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXM7XG4gIH1cblxuICBwdWJsaWMgdW5yZWNvZ25pemVkQ2hhcmFjdGVyKGNoYXJhY3Rlcjogc3RyaW5nLCByYW5nZTogUmFuZ2UpOiB2b2lkIHtcbiAgICB0aGlzLml0ZW1zLnB1c2goe1xuICAgICAgcmFuZ2UsXG4gICAgICBzb3VyY2U6IExBTkdVQUdFX05BTUUsXG4gICAgICBzZXZlcml0eTogRGlhZ25vc3RpY1NldmVyaXR5LkVycm9yLFxuICAgICAgY29kZTogRGlhZ25vc3RpY0NvZGUuVW5yZWNvZ25pemVkQ2hhcmFjdGVyLFxuICAgICAgbWVzc2FnZTogYFRoZSBjaGFyYWN0ZXIgJyR7Y2hhcmFjdGVyfScgaXMgdW5yZWNvZ25pemFibGUuYCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyB1bnRlcm1pbmF0ZWRTdHJpbmdMaXRlcmFsKHJhbmdlOiBSYW5nZSk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMucHVzaCh7XG4gICAgICByYW5nZSxcbiAgICAgIHNvdXJjZTogTEFOR1VBR0VfTkFNRSxcbiAgICAgIHNldmVyaXR5OiBEaWFnbm9zdGljU2V2ZXJpdHkuRXJyb3IsXG4gICAgICBjb2RlOiBEaWFnbm9zdGljQ29kZS5VbnRlcm1pbmF0ZWRTdHJpbmdMaXRlcmFsLFxuICAgICAgbWVzc2FnZTogYFRoaXMgc3RyaW5nIGxpdGVyYWwgbXVzdCBlbmQgd2l0aCBkb3VibGUgcXVvdGVzLmAsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgdW5zdXBwb3J0ZWRFc2NhcGVTZXF1ZW5jZShjaGFyYWN0ZXI6IHN0cmluZywgcmFuZ2U6IFJhbmdlKTogdm9pZCB7XG4gICAgdGhpcy5pdGVtcy5wdXNoKHtcbiAgICAgIHJhbmdlLFxuICAgICAgc291cmNlOiBMQU5HVUFHRV9OQU1FLFxuICAgICAgc2V2ZXJpdHk6IERpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLlVuc3VwcG9ydGVkRXNjYXBlU2VxdWVuY2UsXG4gICAgICBtZXNzYWdlOiBgVGhlIGNoYXJhY3RlciAnJHtjaGFyYWN0ZXJ9JyBpcyBub3QgYSBzdXBwb3J0ZWQgZXNjYXBlIHNlcXVlbmNlLmAsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgbWlzc2luZ1Rva2VuKGtpbmRzOiBUb2tlbktpbmRbXSwgcmFuZ2U6IFJhbmdlLCBlbmRPZkZpbGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLml0ZW1zLnB1c2goe1xuICAgICAgcmFuZ2UsXG4gICAgICBjb2RlOiBEaWFnbm9zdGljQ29kZS5NaXNzaW5nVG9rZW4sXG4gICAgICBzb3VyY2U6IExBTkdVQUdFX05BTUUsXG4gICAgICBzZXZlcml0eTogRGlhZ25vc3RpY1NldmVyaXR5LkVycm9yLFxuICAgICAgbWVzc2FnZTogYEEgdG9rZW4gb2Yga2luZCAke2tpbmRzLm1hcChrID0+IGAnJHtnZXRUb2tlbkRlc2NyaXB0aW9uKGspfSdgKS5qb2luKFwiIG9yIFwiKX0gd2FzIGV4cGVjdGVkICR7XG4gICAgICAgIGVuZE9mRmlsZSA/IFwiYWZ0ZXIgdGhpc1wiIDogXCJoZXJlXCJcbiAgICAgIH0uYCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyB1bmV4cGVjdGVkVG9rZW4odG9rZW46IFRva2VuKTogdm9pZCB7XG4gICAgdGhpcy5pdGVtcy5wdXNoKHtcbiAgICAgIHJhbmdlOiB0b2tlbi5yYW5nZSxcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLlVuZXhwZWN0ZWRUb2tlbixcbiAgICAgIHNvdXJjZTogTEFOR1VBR0VfTkFNRSxcbiAgICAgIHNldmVyaXR5OiBEaWFnbm9zdGljU2V2ZXJpdHkuRXJyb3IsXG4gICAgICBtZXNzYWdlOiBgQSB0b2tlbiBvZiBraW5kICcke2dldFRva2VuRGVzY3JpcHRpb24odG9rZW4ua2luZCl9JyB3YXMgbm90IGV4cGVjdGVkIGhlcmUuYCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBtdWx0aXBsZVZlcnNpb25zKHJhbmdlOiBSYW5nZSk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMucHVzaCh7XG4gICAgICByYW5nZSxcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLk11bHRpcGxlVmVyc2lvbixcbiAgICAgIHNvdXJjZTogTEFOR1VBR0VfTkFNRSxcbiAgICAgIHNldmVyaXR5OiBEaWFnbm9zdGljU2V2ZXJpdHkuRXJyb3IsXG4gICAgICBtZXNzYWdlOiBgQSB2ZXJzaW9uIGlzIGFscmVhZHkgc3BlY2lmaWVkIGZvciB0aGlzIGRvY3VtZW50Jy4gWW91IGNhbiBvbmx5IHNwZWNpZnkgb25lLmAsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgdW5yZWNvZ25pemVkVmVyc2lvbih2ZXJzaW9uOiBzdHJpbmcsIHJhbmdlOiBSYW5nZSk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMucHVzaCh7XG4gICAgICByYW5nZSxcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLlVucmVjb2duaXplZFZlcnNpb24sXG4gICAgICBzb3VyY2U6IExBTkdVQUdFX05BTUUsXG4gICAgICBzZXZlcml0eTogRGlhZ25vc3RpY1NldmVyaXR5LkVycm9yLFxuICAgICAgbWVzc2FnZTogYFRoZSB2ZXJzaW9uICcke3ZlcnNpb259JyBpcyBub3QgdmFsaWQuIE9ubHkgdmVyc2lvbnMgdXAgdG8gJyR7TUFYSU1VTV9TVVBQT1JURURfVkVSU0lPTn0nIGFyZSBzdXBwb3J0ZWQuYCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyB2ZXJzaW9uQWZ0ZXJCbG9jayhyYW5nZTogUmFuZ2UpOiB2b2lkIHtcbiAgICB0aGlzLml0ZW1zLnB1c2goe1xuICAgICAgcmFuZ2UsXG4gICAgICBjb2RlOiBEaWFnbm9zdGljQ29kZS5WZXJzaW9uQWZ0ZXJCbG9jayxcbiAgICAgIHNvdXJjZTogTEFOR1VBR0VfTkFNRSxcbiAgICAgIHNldmVyaXR5OiBEaWFnbm9zdGljU2V2ZXJpdHkuRXJyb3IsXG4gICAgICBtZXNzYWdlOiBgVmVyc2lvbiBtdXN0IGJlIHNwZWNpZmllZCBiZWZvcmUgYWxsIGFjdGlvbnMgb3Igd29ya2Zsb3dzIGFyZSBkZWZpbmVkLmAsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgdmFsdWVJc05vdFN0cmluZyhyYW5nZTogUmFuZ2UpOiB2b2lkIHtcbiAgICB0aGlzLml0ZW1zLnB1c2goe1xuICAgICAgcmFuZ2UsXG4gICAgICBjb2RlOiBEaWFnbm9zdGljQ29kZS5WYWx1ZUlzTm90U3RyaW5nLFxuICAgICAgc291cmNlOiBMQU5HVUFHRV9OQU1FLFxuICAgICAgc2V2ZXJpdHk6IERpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcbiAgICAgIG1lc3NhZ2U6IGBWYWx1ZSBtdXN0IGJlIGEgc2luZ2xlIHN0cmluZy5gLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHZhbHVlSXNOb3RTdHJpbmdPckFycmF5KHJhbmdlOiBSYW5nZSk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMucHVzaCh7XG4gICAgICByYW5nZSxcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLlZhbHVlSXNOb3RTdHJpbmdPckFycmF5LFxuICAgICAgc291cmNlOiBMQU5HVUFHRV9OQU1FLFxuICAgICAgc2V2ZXJpdHk6IERpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcbiAgICAgIG1lc3NhZ2U6IGBWYWx1ZSBtdXN0IGJlIGEgc2luZ2xlIHN0cmluZyBvciBhbiBhcnJheSBvZiBzdHJpbmdzLmAsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgdmFsdWVJc05vdEFuT2JqZWN0KHJhbmdlOiBSYW5nZSk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMucHVzaCh7XG4gICAgICByYW5nZSxcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLlZhbHVlSXNOb3RBbk9iamVjdCxcbiAgICAgIHNvdXJjZTogTEFOR1VBR0VfTkFNRSxcbiAgICAgIHNldmVyaXR5OiBEaWFnbm9zdGljU2V2ZXJpdHkuRXJyb3IsXG4gICAgICBtZXNzYWdlOiBgVmFsdWUgbXVzdCBiZSBhbiBvYmplY3QuYCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBwcm9wZXJ0eUFscmVhZHlEZWZpbmVkKGtleXdvcmQ6IFRva2VuKTogdm9pZCB7XG4gICAgdGhpcy5pdGVtcy5wdXNoKHtcbiAgICAgIHJhbmdlOiBrZXl3b3JkLnJhbmdlLFxuICAgICAgY29kZTogRGlhZ25vc3RpY0NvZGUuUHJvcGVydHlBbHJlYWR5RGVmaW5lZCxcbiAgICAgIHNvdXJjZTogTEFOR1VBR0VfTkFNRSxcbiAgICAgIHNldmVyaXR5OiBEaWFnbm9zdGljU2V2ZXJpdHkuRXJyb3IsXG4gICAgICBtZXNzYWdlOiBgQSBwcm9wZXJ0eSAnJHtnZXRUb2tlbkRlc2NyaXB0aW9uKGtleXdvcmQua2luZCl9JyBpcyBhbHJlYWR5IGRlZmluZWQgaW4gdGhpcyBibG9jay5gLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHByb3BlcnR5TXVzdEJlRGVmaW5lZChwcm9wZXJ0eTogVG9rZW5LaW5kLCBibG9jazogVG9rZW4pOiB2b2lkIHtcbiAgICB0aGlzLml0ZW1zLnB1c2goe1xuICAgICAgcmFuZ2U6IGJsb2NrLnJhbmdlLFxuICAgICAgY29kZTogRGlhZ25vc3RpY0NvZGUuUHJvcGVydHlNdXN0QmVEZWZpbmVkLFxuICAgICAgc291cmNlOiBMQU5HVUFHRV9OQU1FLFxuICAgICAgc2V2ZXJpdHk6IERpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcbiAgICAgIG1lc3NhZ2U6IGBUaGlzICcke2dldFRva2VuRGVzY3JpcHRpb24oYmxvY2sua2luZCl9JyBtdXN0IGRlZmluZSBhICcke2dldFRva2VuRGVzY3JpcHRpb24ocHJvcGVydHkpfScgcHJvcGVydHkuYCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBpbnZhbGlkUHJvcGVydHkocHJvcGVydHk6IFRva2VuLCBibG9jazogVG9rZW5LaW5kKTogdm9pZCB7XG4gICAgdGhpcy5pdGVtcy5wdXNoKHtcbiAgICAgIHJhbmdlOiBwcm9wZXJ0eS5yYW5nZSxcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLkludmFsaWRQcm9wZXJ0eSxcbiAgICAgIHNvdXJjZTogTEFOR1VBR0VfTkFNRSxcbiAgICAgIHNldmVyaXR5OiBEaWFnbm9zdGljU2V2ZXJpdHkuRXJyb3IsXG4gICAgICBtZXNzYWdlOiBgQSBwcm9wZXJ0eSBvZiBraW5kICcke2dldFRva2VuRGVzY3JpcHRpb24oXG4gICAgICAgIHByb3BlcnR5LmtpbmQsXG4gICAgICApfScgY2Fubm90IGJlIGRlZmluZWQgZm9yIGEgJyR7Z2V0VG9rZW5EZXNjcmlwdGlvbihibG9jayl9JyBibG9jay5gLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGR1cGxpY2F0ZUtleShrZXk6IHN0cmluZywgcmFuZ2U6IFJhbmdlKTogdm9pZCB7XG4gICAgdGhpcy5pdGVtcy5wdXNoKHtcbiAgICAgIHJhbmdlLFxuICAgICAgY29kZTogRGlhZ25vc3RpY0NvZGUuRHVwbGljYXRlS2V5LFxuICAgICAgc291cmNlOiBMQU5HVUFHRV9OQU1FLFxuICAgICAgc2V2ZXJpdHk6IERpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcbiAgICAgIG1lc3NhZ2U6IGBBIGtleSB3aXRoIHRoZSBuYW1lICcke2tleX0nIGlzIGFscmVhZHkgZGVmaW5lZC5gLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHRvb01hbnlBY3Rpb25zKHJhbmdlOiBSYW5nZSk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMucHVzaCh7XG4gICAgICByYW5nZSxcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLlRvb01hbnlBY3Rpb25zLFxuICAgICAgc291cmNlOiBMQU5HVUFHRV9OQU1FLFxuICAgICAgc2V2ZXJpdHk6IERpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcbiAgICAgIG1lc3NhZ2U6IGBUb28gbWFueSBhY3Rpb25zIGRlZmluZWQuIFRoZSBtYXhpbXVtIGN1cnJlbnRseSBzdXBwb3J0ZWQgaXMgJyR7TUFYSU1VTV9TVVBQT1JURURfQUNUSU9OU30nLmAsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZHVwbGljYXRlQmxvY2soZHVwbGljYXRlOiBzdHJpbmcsIHJhbmdlOiBSYW5nZSk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMucHVzaCh7XG4gICAgICByYW5nZSxcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLkR1cGxpY2F0ZUJsb2NrLFxuICAgICAgc291cmNlOiBMQU5HVUFHRV9OQU1FLFxuICAgICAgc2V2ZXJpdHk6IERpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcbiAgICAgIG1lc3NhZ2U6IGBUaGlzIGZpbGUgYWxyZWFkeSBkZWZpbmVzIGFub3RoZXIgd29ya2Zsb3cgb3IgYWN0aW9uIHdpdGggdGhlIG5hbWUgJyR7ZHVwbGljYXRlfScuYCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBjaXJjdWxhckRlcGVuZGVuY3koYWN0aW9uOiBzdHJpbmcsIHJhbmdlOiBSYW5nZSk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMucHVzaCh7XG4gICAgICByYW5nZSxcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLkNpcmN1bGFyRGVwZW5kZW5jeSxcbiAgICAgIHNvdXJjZTogTEFOR1VBR0VfTkFNRSxcbiAgICAgIHNldmVyaXR5OiBEaWFnbm9zdGljU2V2ZXJpdHkuRXJyb3IsXG4gICAgICBtZXNzYWdlOiBgVGhlIGFjdGlvbiAnJHthY3Rpb259JyBoYXMgYSBjaXJjdWxhciBkZXBlbmRlbmN5IG9uIGl0c2VsZi5gLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFjdGlvbkRvZXNOb3RFeGlzdChhY3Rpb246IHN0cmluZywgcmFuZ2U6IFJhbmdlKTogdm9pZCB7XG4gICAgdGhpcy5pdGVtcy5wdXNoKHtcbiAgICAgIHJhbmdlLFxuICAgICAgY29kZTogRGlhZ25vc3RpY0NvZGUuQWN0aW9uRG9lc05vdEV4aXN0LFxuICAgICAgc291cmNlOiBMQU5HVUFHRV9OQU1FLFxuICAgICAgc2V2ZXJpdHk6IERpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcbiAgICAgIG1lc3NhZ2U6IGBUaGUgYWN0aW9uICcke2FjdGlvbn0nIGRvZXMgbm90IGV4aXN0IGluIHRoZSBzYW1lIHdvcmtmbG93IGZpbGUuYCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyB0b29NYW55U2VjcmV0cyhyYW5nZTogUmFuZ2UpOiB2b2lkIHtcbiAgICB0aGlzLml0ZW1zLnB1c2goe1xuICAgICAgcmFuZ2UsXG4gICAgICBjb2RlOiBEaWFnbm9zdGljQ29kZS5Ub29NYW55U2VjcmV0cyxcbiAgICAgIHNvdXJjZTogTEFOR1VBR0VfTkFNRSxcbiAgICAgIHNldmVyaXR5OiBEaWFnbm9zdGljU2V2ZXJpdHkuRXJyb3IsXG4gICAgICBtZXNzYWdlOiBgVG9vIG1hbnkgc2VjcmV0cyBkZWZpbmVkLiBUaGUgbWF4aW11bSBjdXJyZW50bHkgc3VwcG9ydGVkIGlzICcke01BWElNVU1fU1VQUE9SVEVEX1NFQ1JFVFN9Jy5gLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGR1cGxpY2F0ZVNlY3JldHMoZHVwbGljYXRlOiBzdHJpbmcsIHJhbmdlOiBSYW5nZSk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMucHVzaCh7XG4gICAgICByYW5nZSxcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLkR1cGxpY2F0ZVNlY3JldHMsXG4gICAgICBzb3VyY2U6IExBTkdVQUdFX05BTUUsXG4gICAgICBzZXZlcml0eTogRGlhZ25vc3RpY1NldmVyaXR5LkVycm9yLFxuICAgICAgbWVzc2FnZTogYFRoaXMgcHJvcGVydHkgaGFzIGR1cGxpY2F0ZSAnJHtkdXBsaWNhdGV9JyBzZWNyZXRzLmAsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZHVwbGljYXRlQWN0aW9ucyhkdXBsaWNhdGU6IHN0cmluZywgcmFuZ2U6IFJhbmdlKTogdm9pZCB7XG4gICAgdGhpcy5pdGVtcy5wdXNoKHtcbiAgICAgIHJhbmdlLFxuICAgICAgY29kZTogRGlhZ25vc3RpY0NvZGUuRHVwbGljYXRlQWN0aW9ucyxcbiAgICAgIHNvdXJjZTogTEFOR1VBR0VfTkFNRSxcbiAgICAgIHNldmVyaXR5OiBEaWFnbm9zdGljU2V2ZXJpdHkuRXJyb3IsXG4gICAgICBtZXNzYWdlOiBgVGhpcyBwcm9wZXJ0eSBoYXMgZHVwbGljYXRlICcke2R1cGxpY2F0ZX0nIGFjdGlvbnMuYCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyByZXNlcnZlZEVudmlyb25tZW50VmFyaWFibGUocmFuZ2U6IFJhbmdlKTogdm9pZCB7XG4gICAgdGhpcy5pdGVtcy5wdXNoKHtcbiAgICAgIHJhbmdlLFxuICAgICAgY29kZTogRGlhZ25vc3RpY0NvZGUuUmVzZXJ2ZWRFbnZpcm9ubWVudFZhcmlhYmxlLFxuICAgICAgc291cmNlOiBMQU5HVUFHRV9OQU1FLFxuICAgICAgc2V2ZXJpdHk6IERpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcbiAgICAgIG1lc3NhZ2U6IGBFbnZpcm9ubWVudCB2YXJpYWJsZXMgc3RhcnRpbmcgd2l0aCAnR0lUSFVCXycgYXJlIHJlc2VydmVkLmAsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgdW5yZWNvZ25pemVkRXZlbnQoZXZlbnQ6IHN0cmluZywgcmFuZ2U6IFJhbmdlKTogdm9pZCB7XG4gICAgdGhpcy5pdGVtcy5wdXNoKHtcbiAgICAgIHJhbmdlLFxuICAgICAgY29kZTogRGlhZ25vc3RpY0NvZGUuVW5yZWNvZ25pemVkRXZlbnQsXG4gICAgICBzb3VyY2U6IExBTkdVQUdFX05BTUUsXG4gICAgICBzZXZlcml0eTogRGlhZ25vc3RpY1NldmVyaXR5LkVycm9yLFxuICAgICAgbWVzc2FnZTogYFRoZSBldmVudCAnJHtldmVudH0nIGlzIG5vdCBhIGtub3duIGV2ZW50IHR5cGUgb3IgYSBzY2hlZHVsZS5gLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGludmFsaWRVc2VzKHJhbmdlOiBSYW5nZSk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMucHVzaCh7XG4gICAgICByYW5nZSxcbiAgICAgIGNvZGU6IERpYWdub3N0aWNDb2RlLkludmFsaWRVc2VzLFxuICAgICAgc291cmNlOiBMQU5HVUFHRV9OQU1FLFxuICAgICAgc2V2ZXJpdHk6IERpYWdub3N0aWNTZXZlcml0eS5FcnJvcixcbiAgICAgIG1lc3NhZ2U6IGBUaGUgJ3VzZXMnIHByb3BlcnR5IG11c3QgYmUgYSBwYXRoLCBhIERvY2tlciBpbWFnZSwgb3IgYW4gb3duZXIvcmVwb0ByZWYgcmVtb3RlLmAsXG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==
